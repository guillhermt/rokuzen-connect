<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ROKUZEN • Escolha seu Posto</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --rokuzen: #a3c441;
        --rokuzen-dark: #8fb23a;
        --rokuzen-light: #f0f7d9;
        --livre: #10b981;
        --livre-light: #d1fae5;
        --ocupado: #ef4444;
        --ocupado-light: #fee2e2;
        --manutencao: #8b5cf6;
        --manutencao-light: #ede9fe;
        --limpeza: #f59e0b;
        --limpeza-light: #fef3c7;
        --bg: #f8fafc;
        --card-bg: #ffffff;
        --text: #1e293b;
        --text-light: #64748b;
        --border: #e2e8f0;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      * {
        box-sizing: border-box;
      }
      body {
        background: var(--bg);
        font-family: "Inter", sans-serif;
        color: var(--text);
        padding-bottom: 130px;
        line-height: 1.6;
      }

      /* NAVBAR */
      .navbar-custom {
        background: linear-gradient(
          135deg,
          var(--rokuzen),
          var(--rokuzen-dark)
        );
        padding: 1.2rem 0;
        box-shadow: var(--shadow);
      }
      .navbar-custom h1 {
        font-weight: 800;
        font-size: 1.5rem;
        letter-spacing: -0.5px;
      }

      /* TERAPEUTAS TOPBAR */
      .terapeutas-topbar {
        background: white;
        padding: 1.5rem 0;
        border-bottom: 1px solid var(--border);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
      }
      .terapeuta-mini {
        background: white;
        border-radius: 12px;
        padding: 12px 16px;
        font-weight: 600;
        font-size: 0.9rem;
        min-width: 130px;
        transition: all 0.3s ease;
        box-shadow: var(--shadow);
        border: 1px solid var(--border);
      }
      .terapeuta-mini:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }
      .terapeuta-disponivel {
        border-left: 4px solid var(--livre);
      }
      .terapeuta-ocupado {
        border-left: 4px solid var(--ocupado);
      }
      .status-dot {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        margin-right: 6px;
      }

      /* POSTO CARD */
      .posto-card {
        border-radius: 16px;
        overflow: hidden;
        background: var(--card-bg);
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
        height: 100%;
        cursor: default;
        position: relative;
        border: 1px solid var(--border);
      }
      .posto-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
      }
      .posto-livre {
        border-top: 4px solid var(--livre);
        cursor: pointer;
      }
      .posto-ocupado {
        border-top: 4px solid var(--ocupado);
      }
      .posto-manutencao {
        border-top: 4px solid var(--manutencao);
      }
      .posto-limpeza {
        border-top: 4px solid var(--limpeza);
      }

      .header-posto {
        padding: 1.8rem 1.5rem;
        text-align: center;
        color: white;
        min-height: 280px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        position: relative;
        overflow: hidden;
      }
      .header-posto::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60%;
        background: linear-gradient(180deg, transparent, rgba(0, 0, 0, 0.2));
        pointer-events: none;
      }

      .posto-livre .header-posto {
        background: linear-gradient(135deg, #059669, #10b981);
      }
      .posto-ocupado .header-posto {
        background: linear-gradient(135deg, #dc2626, #ef4444);
      }
      .posto-manutencao .header-posto {
        background: linear-gradient(135deg, #7c3aed, #8b5cf6);
      }
      .posto-limpeza .header-posto {
        background: linear-gradient(135deg, #d97706, #f59e0b);
      }

      .posto-nome {
        font-size: 1.5rem;
        font-weight: 800;
        letter-spacing: -0.5px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }
      .cronometro {
        font-size: 2.8rem;
        font-weight: 900;
        letter-spacing: -1px;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        font-variant-numeric: tabular-nums;
      }
      .status-text {
        font-size: 1.1rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* RODAPÉ */
      .footer-fixed {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        padding: 1rem 0;
        box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        border-top: 1px solid var(--border);
      }
      .footer-item {
        font-weight: 600;
        font-size: 0.9rem;
      }
      .footer-count {
        display: block;
        font-size: 1.5rem;
        font-weight: 800;
        line-height: 1;
      }

      /* MODAL AGENDAMENTO */
      .modal-content {
        border-radius: 16px;
        overflow: hidden;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border);
      }
      .modal-header {
        background: linear-gradient(
          135deg,
          var(--rokuzen),
          var(--rokuzen-dark)
        );
        color: white;
        padding: 1.5rem 2rem;
        border: none;
      }
      .modal-title {
        font-weight: 800;
        font-size: 1.4rem;
      }
      .form-label {
        font-weight: 600;
        color: var(--text);
        margin-bottom: 0.5rem;
      }
      .form-control,
      .form-select {
        border-radius: 8px;
        padding: 0.75rem 1rem;
        font-size: 1rem;
        border: 1px solid var(--border);
        transition: all 0.3s ease;
      }
      .form-control:focus,
      .form-select:focus {
        border-color: var(--rokuzen);
        box-shadow: 0 0 0 3px rgba(163, 196, 65, 0.2);
      }
      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--rokuzen),
          var(--rokuzen-dark)
        );
        border: none;
        border-radius: 8px;
        padding: 0.9rem 2rem;
        font-weight: 700;
        font-size: 1rem;
        transition: all 0.3s ease;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow);
      }

      /* ANIMAÇÃO DE ENTRADA */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-card {
        animation: fadeInUp 0.6s ease forwards;
        opacity: 0;
      }

      /* NOVOS ELEMENTOS */
      .status-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        z-index: 10;
      }
      .livre-badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }
      .ocupado-badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }
      .manutencao-badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }
      .limpeza-badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .card-footer {
        background: white;
        padding: 1rem 1.5rem;
        border-top: 1px solid var(--border);
      }
      .card-footer p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-light);
      }

      .clickable {
        cursor: pointer;
      }

      .section-title {
        font-weight: 700;
        font-size: 1.2rem;
        margin-bottom: 1rem;
        color: var(--text);
      }

      .section-subtitle {
        font-weight: 500;
        font-size: 0.9rem;
        color: var(--text-light);
        margin-bottom: 1.5rem;
      }

      /* RESPONSIVIDADE */
      @media (max-width: 768px) {
        .header-posto {
          min-height: 220px;
          padding: 1.5rem 1rem;
        }
        .posto-nome {
          font-size: 1.3rem;
        }
        .cronometro {
          font-size: 2.2rem;
        }
        .footer-count {
          font-size: 1.3rem;
        }
        .footer-item {
          font-size: 0.8rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- NAVBAR -->

<nav class="navbar navbar-dark navbar-custom text-white">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <a href="cliente-selecao.html" class="text-white text-decoration-none d-flex align-items-center">
      <i class="bi bi-arrow-left-circle-fill fs-3 me-2"></i>
      <span class="d-none d-sm-inline fw-bold">Voltar</span>
    </a>
    <h1 class="m-0 text-center flex-grow-1">
      <i class="bi bi-flower1 me-2"></i> ROKUZEN • Unidade Golden Square Shopping
    </h1>
    <div style="width: 60px;"></div>
  </div>
</nav>
    <!-- TERAPEUTAS -->
    <div class="terapeutas-topbar">
      <div class="container">
        <h4 class="mb-3 fw-bold text-center section-title">
          Terapeutas Disponíveis
        </h4>
        <p class="text-center section-subtitle">
          Selecione um terapeuta para ver horários disponíveis
        </p>
        <div class="d-flex gap-3 overflow-x-auto pb-2 justify-content-center">
          <div class="terapeuta-mini terapeuta-disponivel clickable">
            <div><span class="status-dot bg-success"></span>Alvaro</div>
            <small class="text-muted">Disponível</small>
          </div>
        </div>
      </div>
    </div>

    <!-- GRID POSTOS -->
    <div class="container mt-4">
      <h4 class="section-title">Escolha seu Posto</h4>
      <p class="section-subtitle">
        Selecione um posto livre para agendar sua massagem
      </p>
      <div class="row g-4" id="gridPostos"></div>
    </div>

    <!-- RODAPÉ -->
    <div class="footer-fixed">
      <div class="container">
        <div class="row text-center">
          <div class="col footer-item text-success">
            <span class="footer-count" id="qtdLivre">0</span>
            LIVRES
          </div>
          <div class="col footer-item text-danger">
            <span class="footer-count" id="qtdOcupado">0</span>
            OCUPADOS
          </div>
          <div class="col footer-item" style="color: var(--manutencao)">
            <span class="footer-count" id="qtdManutencao">0</span>
            MANUTENÇÃO
          </div>
          <div class="col footer-item" style="color: var(--limpeza)">
            <span class="footer-count" id="qtdLimpeza">0</span>
            LIMPEZA
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL AGENDAMENTO -->
    <div class="modal fade" id="modalAgendamento" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="bi bi-calendar-check me-2"></i> AGENDAR MASSAGEM
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body p-4">
            <div class="text-center mb-4">
              <h3 class="fw-bold text-success">
                Posto <span id="postoSelecionado">03</span>
              </h3>
              <p class="text-muted">
                Preencha os dados para agendar sua sessão
              </p>
            </div>

            <form id="formAgendamento">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Nome completo</label>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Ex: Maria Silva"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Telefone (WhatsApp)</label>
                  <input
                    type="tel"
                    class="form-control"
                    placeholder="(11) 98765-4321"
                    required
                  />
                </div>
                <div class="col-md-7">
                  <label class="form-label">Tipo de Massagem</label>
                  <select class="form-select" required>
                    <option value="">Selecione...</option>
                    <option value="3600">
                      Massagem Completa – 60min – R$ 120
                    </option>
                    <option value="2700">Quick Massage – 45min – R$ 90</option>
                    <option value="1800">Reflexologia – 30min – R$ 70</option>
                    <option value="5400">
                      Massagem Premium – 90min – R$ 180
                    </option>
                  </select>
                </div>
                <div class="col-md-5">
                  <label class="form-label">Horário preferencial</label>
                  <input type="time" class="form-control" required />
                </div>
                <div class="col-12"></div>
              </div>
            </form>
          </div>
          <div class="modal-footer justify-content-center">
            <button
              class="btn btn-outline-secondary px-4"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button
              class="btn btn-primary px-5"
              onclick="confirmarAgendamento()"
            >
              <i class="bi bi-check-lg"></i> CONFIRMAR AGENDAMENTO
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL CONFIRMAÇÃO -->
    <div class="modal fade" id="modalConfirmacao" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center p-4">
          <div class="mb-4">
            <i
              class="bi bi-check-circle-fill text-success"
              style="font-size: 4rem"
            ></i>
          </div>
          <h4 class="fw-bold">Agendamento confirmado!</h4>
          <p class="text-muted">
            Você será atendido no
            <strong>Posto <span id="postoConfirmado">03</span></strong
            >.<br />
            Aguarde seu horário ou dirija-se ao local.
          </p>
          <button class="btn btn-success px-5" data-bs-dismiss="modal">
            OK, ENTENDI
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // DADOS SIMULADOS
      const postos = [
        { id: 1, nome: "Posto 01", status: "livre" },
        { id: 2, nome: "Posto 02", status: "ocupado", tempo: 1234 },
        { id: 3, nome: "Posto 03", status: "livre" },
        { id: 4, nome: "Posto 04", status: "manutencao" },
        { id: 5, nome: "Posto 05", status: "ocupado", tempo: 856 },
        { id: 6, nome: "Posto 06", status: "limpeza" },
        { id: 7, nome: "Posto 07", status: "livre" },
        { id: 8, nome: "Posto 08", status: "ocupado", tempo: 2341 },
      ];

      // FUNÇÕES
      function formatarTempo(s) {
        if (s <= 0) return "00:00";
        const m = String(Math.floor(s / 60)).padStart(2, "0");
        const seg = String(s % 60).padStart(2, "0");
        return `${m}:${seg}`;
      }

      function criarCard(posto, index) {
        const card = document.createElement("div");
        card.className = `col-6 col-md-4 col-lg-3 animate-card posto-card posto-${posto.status}`;
        card.style.animationDelay = `${index * 0.1}s`;

        if (posto.status === "livre") {
          card.onclick = () => abrirAgendamento(posto);
          card.classList.add("clickable");
        }

        let conteudo = "";
        let badge = "";

        if (posto.status === "ocupado") {
          conteudo = `<div class="cronometro" id="timer-${
            posto.id
          }">${formatarTempo(posto.tempo)}</div>`;
          badge = `<span class="status-badge ocupado-badge">Ocupado</span>`;
        } else if (posto.status === "livre") {
          conteudo = `<div class="cronometro text-white">LIVRE</div>`;
          badge = `<span class="status-badge livre-badge">Disponível</span>`;
        } else {
          const textos = { manutencao: "MANUTENÇÃO", limpeza: "EM LIMPEZA" };
          const badges = {
            manutencao: "manutencao-badge",
            limpeza: "limpeza-badge",
          };
          conteudo = `<div class="status-text">${
            textos[posto.status] || posto.status.toUpperCase()
          }</div>`;
          badge = `<span class="status-badge ${badges[posto.status]}">${
            textos[posto.status] || posto.status.toUpperCase()
          }</span>`;
        }

        card.innerHTML = `
        <div class="header-posto">
          ${badge}
          <h2 class="posto-nome">${posto.nome}</h2>
          ${conteudo}
          <i class="bi ${
            posto.status === "livre" ? "bi-unlock-fill" : "bi-lock-fill"
          } fs-3"></i>
        </div>
        <div class="card-footer">
          <p>${
            posto.status === "livre"
              ? "Clique para agendar"
              : "Indisponível no momento"
          }</p>
        </div>
      `;
        return card;
      }

      function abrirAgendamento(posto) {
        document.getElementById("postoSelecionado").textContent =
          posto.nome.split(" ")[1];
        document.getElementById("postoConfirmado").textContent =
          posto.nome.split(" ")[1];
        new bootstrap.Modal(document.getElementById("modalAgendamento")).show();
        window.postoEscolhido = posto;
      }

      function confirmarAgendamento() {
        const form = document.getElementById("formAgendamento");
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }
        bootstrap.Modal.getInstance(
          document.getElementById("modalAgendamento")
        ).hide();
        new bootstrap.Modal(document.getElementById("modalConfirmacao")).show();

        // Simula ocupação
        const posto = window.postoEscolhido;
        posto.status = "ocupado";
        posto.tempo = 3600; // 60 min
        atualizarGrid();
      }

      function atualizarContadores() {
        const c = { livre: 0, ocupado: 0, manutencao: 0, limpeza: 0 };
        postos.forEach((p) => c[p.status]++);
        document.getElementById("qtdLivre").textContent = c.livre;
        document.getElementById("qtdOcupado").textContent = c.ocupado;
        document.getElementById("qtdManutencao").textContent = c.manutencao;
        document.getElementById("qtdLimpeza").textContent = c.limpeza;
      }

      function atualizarGrid() {
        const grid = document.getElementById("gridPostos");
        grid.innerHTML = "";
        postos.forEach((p, i) => grid.appendChild(criarCard(p, i)));
        atualizarContadores();
      }

      // INICIALIZAÇÃO
      atualizarGrid();

      // SIMULAÇÃO DE TEMPO
      setInterval(() => {
        postos.forEach((p) => {
          if (p.status === "ocupado" && p.tempo > 0) {
            p.tempo--;
            const el = document.getElementById(`timer-${p.id}`);
            if (el) el.textContent = formatarTempo(p.tempo);
            if (p.tempo <= 0) p.status = "livre";
          }
        });
        // Atualiza apenas timers e status
        document
          .querySelectorAll('[id^="timer-"], .posto-card')
          .forEach((el) => {
            const id = el.id?.match(/timer-(\d+)/)?.[1];
            if (id) {
              const posto = postos.find((p) => p.id == id);
              if (posto && posto.status === "livre") {
                el.closest(".posto-card").outerHTML = criarCard(
                  posto,
                  0
                ).outerHTML;
              }
            }
          });
        atualizarContadores();
      }, 1000);
    </script>
    <!-- VLibras -->
<div vw class="enabled">
  <div vw-access-button class="active"></div>
  <div vw-plugin-wrapper>
    <div class="vw-plugin-top-wrapper"></div>
  </div>
</div>

<script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
<script>
  new window.VLibras.Widget('https://vlibras.gov.br/app');
  
  // Opcional: abre automaticamente depois de 3 segundos (muito usado em sites públicos)
  // setTimeout(() => {
  //   document.querySelector('[vw-access-button]').click();
  // }, 3000);
</script>
  </body>
</html>
